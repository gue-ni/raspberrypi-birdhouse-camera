services:
  mediamtx:
    image: bluenviron/mediamtx:1.15.6
    container_name: mediamtx
    restart: unless-stopped

    ports:
      - "1935:1935"              # RTMP ingest (from Pi)
      - "8554:8554"              # RTSP viewing
      - "8888:8888"              # HLS
      - "8889:8889"              # WebRTC
      - "3478:3478/udp"          # WebRTC ICE
      - "40000-40050:40000-40050/udp"  # WebRTC media

    volumes:
      - ./mediamtx.yml:/mediamtx.yml:ro
      - ./recordings:/recordings
